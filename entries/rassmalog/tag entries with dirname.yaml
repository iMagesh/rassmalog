name: Automatic tagging of directory names

date: Sun Mar 25 00:11:48 PDT 2007 @341 /Internet Time/

tags:
  - tricks

text: |
  You can configure Rassmalog to automatically tag entries, while _preserving_ existing tags, with the names of the directories that contain it. For example, the <tt>entries/foo/bar/qux.yaml</tt> entry file would gain the "foo" and "bar" tags automatically.

  If you wish to have such functionality, simply apply the following patch to your <tt>rassmalog.rb</tt> file.

  <pre>
  --- old-blog/rassmalog.rb       2007-03-25 00:37:04.000000000 -0700
  +++ new-blog/rassmalog.rb       2007-03-25 00:37:04.000000000 -0700
  @@ -404,6 +404,10 @@
       entry.src_file = src
       entry.date = DateTime.parse(entry.date.to_s)
       entry.tags = entry.tags.to_a rescue [entry.tags]
  +
  +    # tag entry with the names of its parent directories
  +    entry.tags.concat File.dirname(entry.src_file).split('/')[1..-1]
  +
       entry.tags.flatten!
       entry.tags.compact!
       entry.tags.uniq!
  </pre>
