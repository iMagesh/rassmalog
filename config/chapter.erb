<%
=begin
  This is a template for generating a listing of Page objects.

  The following variables are available for use in this template:
  * BLOG        => data from the blog configuration file
  * LANG        => interface to translation file
  * ENTRIES     => an array of all available blog entries
  * TAGS        => a Chapter containing one Page per tag
  * ARCHIVES    => a Chapter containing one Page per archive
  * CHAPTERS    => an array of Chapter objects
  * @chapter    => the Chapter for which we are generating HTML
=end
%>
<h1><%= LANG[@chapter.name] %></h1>

<ul class="cloud">
<%
  fonts = %w[xx-small x-small small medium large x-large xx-large]
  scale = fonts.length - 1

  largest = @chapter.pages.map { |page| page.entries.length }.max

  @chapter.pages.each do |page|
    size = page.entries.length
    mass = size.to_f / largest
    font = fonts[ (mass * scale).round ]
%>
  <li style="font-size: <%= font %>;" title="<%= size %>">
    <%= page.to_link %> <span style="display: none">(<%= size %>)</span>
  </li>
<% end %>
</ul>
